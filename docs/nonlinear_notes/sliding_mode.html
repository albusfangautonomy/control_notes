<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Sliding Mode Control | Albus’s Control Notes</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Sliding Mode Control" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/nonlinear_notes/sliding_mode.html" />
<meta property="og:url" content="http://localhost:4000/nonlinear_notes/sliding_mode.html" />
<meta property="og:site_name" content="Albus’s Control Notes" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Sliding Mode Control" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Sliding Mode Control","url":"http://localhost:4000/nonlinear_notes/sliding_mode.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/css/custom.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Albus&apos;s Control Notes" /><script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };
  </script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>

</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Albus&#39;s Control Notes</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          <a class="page-link" href="/">Home</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Sliding Mode Control</h1>
  </header>

  <div class="post-content">
    <h1 id="sliding-mode-control-overview">Sliding Mode Control Overview</h1>

\[u = (C^T g(x))^{-1}(-C^T f(x) + h(S(x)))\]

<p>where \(S = C^T x\) is the switching function and describes the sliding surface.</p>

\[\dot{x} = f(x) + g(x) u(t)\]

<p>Reachability Condition: 
\(S \dot{S} &lt; 0\)</p>

<p>Generalized Reaching Function:
\(\dot{S} = h(S(x))\)</p>

<h2 id="two-phases-of-sliding-mode">Two phases of Sliding Mode</h2>
<ol>
  <li>Phase 1: <em>reaching phase</em>
    <ul>
      <li>Trajectories converges to sliding manifold in finite time.</li>
    </ul>
  </li>
  <li>Phase 2: <em>sliding phase</em>
    <ul>
      <li>After reaching the sliding manifold, trajectories are confined in the S = 0 sliding manifold.</li>
      <li>In this phase, the dynamics of the system are represented by the reduced-order model \(\dot{x}_1 = -bx_1\), where \(C = [b, 1]^T\) and \(S = b x_1 + x_2\).</li>
      <li>This is because \(\dot{x}_1 = x_2\)</li>
    </ul>
  </li>
</ol>

<h2 id="fundamental-trade-offs">Fundamental Trade-offs</h2>
<ol>
  <li>Higher gain leads to higher robustness (better disturbance rejection)</li>
  <li>Higher gain also leads to chattering</li>
  <li>Chattering can be addressed in other ways than reducing gain.</li>
</ol>

<p><strong>Notes</strong>:</p>
<ol>
  <li>Sliding Mode control constraints a 2-nd order system to a straight line that describes the sliding surface.</li>
  <li>Sliding Mode control applies to higher order systems.</li>
</ol>

<hr />

<h2 id="sliding-mode-control-core-idea">Sliding Mode Control Core Idea</h2>

<p>To constrain the trajectories so they can only exist in a slice on the plane.</p>

<div style="display: flex; justify-content: center; gap: 20px;">

  <figure style="text-align: center;">
    <img src="../figures/mass_spring_damper_phase_plane.png" width="500" height="400" />
    <figcaption>Mass-Spring-Damper Phase Plane</figcaption>
  </figure>

  <figure style="text-align: center;">
    <img src="../figures/mass_spring_damper_sliding_mode.png" width="500" height="400" />
    <figcaption>Mass-Spring-Damper Sliding Mode Phase Plane</figcaption>
  </figure>

</div>

<p>The yellow line is the sliding surface (when switching function is set to 0), and is the product of slide mode control constraining the trajectories to that slice of the plane.</p>

<p><strong>Note:</strong></p>
<ol>
  <li>This transforms a second order system to a first order system defined by the setting the switching function to 0.</li>
  <li>Switching function \(S = b x_1 + x_2 = 0\).</li>
  <li>In general, <strong>\(S = C^T x\)</strong></li>
  <li>For mass spring damper \(C=[b,1]^T\)</li>
</ol>

<p>Next step is to actually constrain the trajectory to a single line.</p>

<h3 id="constraining-the-trajectory-changing-the-vector-field">Constraining the Trajectory (Changing the vector field)</h3>

<div style="display: flex; justify-content: center; gap: 20px;">
  <figure style="text-align: center;">
    <img src="../figures/constraining_trajectory.png" width="500" height="400" />
    <figcaption>Constraining trajectory by changing vector field</figcaption>
  </figure>

  <figure style="text-align: center;">
    <img src="../figures/sample_trajectory.png" width="500" height="400" />
    <figcaption>Example constrained trajectories</figcaption>
  </figure>
</div>

<h3 id="sliding-mode-control-robustness">Sliding Mode Control Robustness</h3>
<p>Zooming into the plane we can see how disturbances are rejected.</p>

<figure style="text-align: left;">
    <img src="../figures/sliding_mode_robustness.png" width="500" height="400" />
    <figcaption>Robustness and Disturbance Rejection</figcaption>
</figure>

<p><strong>Note:</strong></p>

<ol>
  <li>Orange Arrow denotes the disturbance, blue arrow denotes the controller vector field, and green arrow denotes the net vector.</li>
  <li>If disturbance is big, increase the controller gain (bigger blue arrow)</li>
  <li>However, even though higher gain can overpower disturbance, it also leads to <strong>chattering</strong>, which is exacerbated by delay.</li>
</ol>

<h2 id="dealing-with-chattering-logic-used-to-modify-reaching-law-later">Dealing with Chattering Logic (Used to Modify Reaching Law Later)</h2>

<h3 id="what-is-chattering">What is Chattering?</h3>
<ol>
  <li>
    <p>One of the causes of chattering is the big gains. Similar to switch problem in PID gain scheduling, sliding model big gains causes chattering by providing <strong>drastically different gains for smaller changes in error</strong>, resulting in small oscillations along the sliding manifold.</p>
  </li>
  <li>
    <p>Delay can also cause chattering. Sign changes are not registered instantaneously in the real world.</p>
  </li>
</ol>

<h3 id="method-1-linear-saturation">Method 1: Linear Saturation</h3>
<figure style="text-align: left;">
    <img src="../figures/dealing_with_chatter_sliding_mode.png" width="500" height="400" />
    <figcaption>Dealing with Chattering</figcaption>
</figure>

<ol>
  <li>Define a boundary</li>
  <li>Use full gain to deal with disturbances outside of the boundary</li>
  <li>Linearly reduce the controller gain the closer it gets to the switching surface.</li>
</ol>

<h3 id="other-methods">Other Methods</h3>
<p>Other models besides Linear Saturation exist - Relay, Hyperbolic Tangent …</p>

<hr />

<h2 id="sliding-mode-control-in-second-order-systems">Sliding Mode Control in Second Order Systems</h2>
<p>We are going to investigate Sliding Mode control for a spring-mass-damper system. The state vector \(\vec{x}\) is</p>

\[\vec{x} = [x, v]^T\]

<p>State space is:</p>

\[\dot{x}_1 = x_2,\]

\[\dot{x}_2 = h(\vec{x},u)\]

<h3 id="mass-spring-damper">Mass Spring Damper</h3>

\[M \ddot{x} + D \dot{x} + Kx = u(t)\]

\[\dot{x} =
\begin{bmatrix}
0 &amp; I \\
- M^{-1} K &amp; - M^{-1} D
\end{bmatrix} x
+
\begin{bmatrix}
0 \\
M^{-1}
\end{bmatrix} u\]

\[y =
\begin{bmatrix}
I &amp; 0
\end{bmatrix} x\]

\[\dot{x} = f(x) + g(x) u(t)\]

<h2 id="sliding-mode-controller-fundamental-equations-reachability-condition">Sliding Mode Controller Fundamental Equations (Reachability Condition)</h2>

\[S * \dot{S} &lt; 0\]

<p>This is because S needs to converge to 0, so</p>
<ol>
  <li>if S &gt; 0, then \(\dot{s} &lt; 0\)</li>
  <li>if S &lt; 0, then \(\dot{s} &gt; 0\)</li>
</ol>

<h3 id="designing-s-and-dots-naive">Designing S and \(\dot{S}\) (Naive)</h3>
<p>Given the Reachability Condition, we have a few options:</p>

<ol>
  <li>\(\dot{S} = - \eta * sign(S)\) (Constant Rate Reaching Law)</li>
  <li>\(\dot{S} = - \eta * sign(S) - K S\) (Exponential Reaching Law)</li>
  <li>\(\dot{S} = h(S(x))\) (Generalized Reaching Function)</li>
</ol>

<p>However, \(sign()\) switches harshly and causes chatter. We will replace it with \(\theta\) later on.</p>

<h3 id="deriving-sliding-mode-control-law">Deriving Sliding Mode Control Law</h3>
<p>\(\dot{S} = \frac{\partial S}{\partial x} * \frac{dx}{dt} = h(S(x))\)</p>

<p>We can therefore solve for u(t) for the control law.</p>

<h2 id="dealing-with-chatter-in-reaching-law">Dealing with Chatter in Reaching Law</h2>
<p>Instead of using \(sign(x)\), we can replace it with Boundary Layer to add saturation into the system.</p>

<h3 id="saturation-function-theta">Saturation Function (\(\theta\))</h3>
<p>Let \(\phi\) be the distance between each of the boundary lines to the sliding manifold.</p>

\[\theta(x) = \begin{cases}
    1 &amp; \text{if } S &gt; \phi \\
    \frac{S}{\phi} &amp; \text{if } |S| \le B \\
    -1 &amp; \text{if } S &lt; \phi
\end{cases}\]

<h2 id="modified-reaching-laws-for-chattering">Modified Reaching Laws for Chattering</h2>
<ol>
  <li>\(\dot{S} = - \eta * \theta(S)\) (Modified Constant Rate Reaching Law)</li>
  <li>\(\dot{S} = - \eta * \theta(S) - K S\) (Modified Exponential Reaching Law)</li>
</ol>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Albus&#39;s Control Notes</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Albus&#39;s Control Notes</li><li><a class="u-email" href="mailto:albus.fang.autonomy@gmail.com">albus.fang.autonomy@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
