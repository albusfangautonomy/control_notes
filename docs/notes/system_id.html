<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>System ID | Albus’s Control Notes</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="System ID" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/notes/system_id.html" />
<meta property="og:url" content="http://localhost:4000/notes/system_id.html" />
<meta property="og:site_name" content="Albus’s Control Notes" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="System ID" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"System ID","url":"http://localhost:4000/notes/system_id.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/css/custom.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Albus&apos;s Control Notes" /><script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };
  </script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>

</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Albus&#39;s Control Notes</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          <a class="page-link" href="/">Home</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">System ID</h1>
  </header>

  <div class="post-content">
    <h2 id="motivation---why-do-we-need-system-id">Motivation - Why do we need System ID</h2>
<ol>
  <li>Model for Control Design - PID, MPC, LQR</li>
  <li>Model Updating - Wear and tear in system, or operate in varying environments.</li>
  <li>Complex Systems - aerodaynamics can be hard to model.</li>
</ol>

<h2 id="model">Model</h2>

<h3 id="use-cases">Use Cases</h3>
<ol>
  <li>Controller Design</li>
  <li>State Estimation</li>
  <li>Formal Analysis</li>
  <li>Simulation</li>
</ol>

<h3 id="system-id-types">System ID Types</h3>
<ol>
  <li>Linear</li>
  <li>Nonlinear</li>
  <li>Online and recursive</li>
</ol>

<h3 id="model-components">Model Components</h3>
<ol>
  <li>Structure - e.g. second order differential equations, frequency response, process model (with time delay), neural networks</li>
  <li>Parameters - e.g. physical quantities - mass, spring constant</li>
</ol>

<h3 id="how-to-create-a-model">How to create a model</h3>
<p>Scenario 1: You know a lot about the physical system -&gt; <strong>white box</strong> approach: create model directly from <strong>first principles</strong></p>

<p>Scenario 2: You don’t know much about the system -&gt; <strong>black box</strong> approach: <strong>pure system ID</strong></p>

<p>Scenario 3: You combine first principles with fitting -&gt;<strong>grey box</strong> approach: use first principles to derive structure and fit parameters</p>

<hr />

<h1 id="linear-system-identification">Linear System Identification</h1>
<p>Linear, Nonlinear, Online and Recursive system ID. System ID is a data driven method</p>

<p>Choose a model structure that represents the system dynamics and fit a model to the data by picking the parameters</p>

<h2 id="system-id-vs-curve-fit">System ID vs Curve fit</h2>

<h3 id="curve-fit-yft">Curve fit \(y=f(t)\)</h3>

<p>Curve fit only describes the sequence of data but doesn’t describe the underlying mechanisms that created the data. For instance, curve fitting cannot predict the data if system was initialized at different state or even different inputs.</p>

<h3 id="system-id-yfuyt">System ID \(y=f(u,y,t)\)</h3>

<p>System ID takes into account of correlation between the data points, which depends on previous system state.</p>

<h2 id="typical-system-id-model-candidates">Typical System ID model candidates</h2>
<p><img src="../figures/system_id_models.png" alt="system id model candidates" /></p>

<hr />

<h1 id="system-id-workflow">System ID workflow</h1>

<p><img src="../figures/system_id_workflow.png" alt="system id workflow" /></p>

<h2 id="selecting-a-model-order">Selecting a Model Order</h2>

<h3 id="hankel-singular-value">Hankel Singular Value</h3>
<ol>
  <li>Hankel Singular Values are caluclated by taking the SVD of the Hankel matrix.</li>
  <li>Hankel Singular values can be plotted against model order to show redundant orders to reduce the system.</li>
</ol>

<p><img src="../figures/hankel_singular_value.png" alt="Hankel Singular Value" /></p>

<h2 id="modeling-a-real-system">Modeling a Real System</h2>
<ol>
  <li>Model the system.</li>
  <li>Model the dynamics of disturbance.</li>
</ol>

<h3 id="whiteness-and-correlation-tests">Whiteness and Correlation Tests</h3>
<p><strong>Residual</strong>:</p>
<ol>
  <li>Initialize model at first data point (t=0), predict y at the next time step (t = 1). Caluclate error.</li>
  <li>Initialize model at second data point (t=1), predict y at the next time step (t = 2). Calculate error.</li>
</ol>

<p>…</p>

<ol>
  <li>Initialize model at n-th data point (t = n + 1), predict y at the next time step (t = n + 2). Calculate error.</li>
</ol>

<p>We have a residual curve.</p>

<p><img src="../figures/system_id_residual.png" alt="residual" /></p>

<p><strong>Residual Autocorrelation:</strong> If residual values are correlated with themselves in some way -&gt; there is unmodeled dynamics in disturbance model.</p>

<p><strong>Residual-Input Cross-Correlation:</strong> If residual values are highly cross-correlated with input -&gt; there is unmodeled dynamics in system model.</p>

<hr />

<h1 id="nonlinear-system-id">Nonlinear System ID</h1>

<h2 id="linear-arx-auto-regressive-exogeneous-input-siso">Linear ARX (Auto-Regressive Exogeneous Input) SISO</h2>

<p><img src="../figures/arx.png" alt="Linear ARX" /></p>

<p>An <strong>ARX system</strong> is a type of discrete-time, linear, time-invariant model used in <strong>system identification</strong>, where the output is modeled as an <strong>Auto-Regressive model with eXogenous input</strong>.</p>

<p>The system is described by a linear difference equation:</p>

\[y(t) + a_1 y(t-1) + a_2 y(t-2) + \dots + a_{n_a} y(t-n_a) = b_1 u(t-1) + b_2 u(t-2) + \dots + b_{n_b} u(t-n_b) + e(t)\]

<p>Where:</p>
<ul>
  <li>\(y(t)\) — output at time \(t\)</li>
  <li>\(u(t)\) — input at time \(t\)</li>
  <li>\(e(t)\) — white noise (modeling disturbances)</li>
  <li>\(a_i\) — parameters of the autoregressive part (based on past outputs)</li>
  <li>\(b_i\) — parameters of the exogenous part (based on past inputs)</li>
  <li>\(n_a\) — number of past outputs used</li>
  <li>\(n_b\) — number of past inputs used (often includes a delay \(n_k\))</li>
</ul>

<p>In compact notation:</p>

\[A(q^{-1})y(t) = B(q^{-1})u(t) + e(t)\]

<p>where \(q^{-1}\) is the <strong>backward shift operator</strong> (\(q^{-1} y(t) = y(t-1)\)).</p>

<hr />

<h3 id="key-points">Key Points</h3>
<ul>
  <li><strong>AR</strong> part: models how past outputs affect the current output.</li>
  <li><strong>X</strong> (exogenous) part: models how past inputs affect the current output.</li>
  <li><strong>Linear</strong> in parameters — easy to estimate using least squares.</li>
  <li>Assumes disturbances \(e(t)\) are uncorrelated with the inputs.</li>
</ul>

<hr />

<h2 id="nlarx-model-linear-regressors--linear-output-functiony--offset">NLARX Model (Linear Regressors + Linear output function(y) + Offset)</h2>

<p>Note that the offset term makes a linear system nonlinear. A linear system with an offset is called <strong>affine</strong>.</p>

<h3 id="idlinear">idLinear</h3>
<ol>
  <li>Linear function for input</li>
  <li>Offset term to make the system affine.</li>
</ol>

<hr />

<h2 id="narx-systems">NARX Systems</h2>

<p><img src="../figures/narx.png" alt="NARX system diagram" /></p>

<p>A <strong>NARX system</strong> is a <strong>Nonlinear Auto-Regressive model with eXogenous input</strong>.<br />
It extends the ARX model by allowing <strong>nonlinear relationships</strong> between past inputs, past outputs, and the current output.</p>

<p>The general form is:</p>

\[y(t) = F\big( y(t-1), y(t-2), \dots, y(t-n_a), \; u(t-1), u(t-2), \dots, u(t-n_b) \big) + e(t)\]

<p>Where:</p>
<ul>
  <li>\(y(t)\) — output at time \(t\)</li>
  <li>\(u(t)\) — input at time \(t\)</li>
  <li>\(e(t)\) — noise or disturbance</li>
  <li>\(n_a\) — number of past outputs used</li>
  <li>\(n_b\) — number of past inputs used</li>
  <li>\(F(\cdot)\) — a <strong>nonlinear mapping function</strong> (e.g., neural network, polynomial, or other nonlinear model)</li>
</ul>

<p><strong>Note</strong> each of the term may be multiplied by non-linear functions like Fourier-Series.</p>

<hr />

<h3 id="key-points-1">Key Points</h3>
<ul>
  <li>While it is possible to capture the entire system with nonlinear dynamics, it is generally not recommended since there is no global stability guaratnee.</li>
  <li>To better understand the system dynamics while accounting for non-linear dynamics, we generally use a <strong>linear combination</strong> of nonlinear regressors to model the bulk of the system, and use <strong>non-linear combination</strong> to capture the remaining nonlinear dynamics.
    <ul>
      <li>A linear combination of nonlinear regressors is still linear.</li>
    </ul>
  </li>
  <li>Generalizes ARX by replacing the linear mapping with a <strong>nonlinear function</strong>. ie \((y(t-1))^2 + \sqrt{u(t-1 )}\)</li>
  <li>Captures complex, nonlinear system dynamics more accurately than ARX.</li>
  <li>Commonly used in <strong>machine learning–based system identification</strong>.</li>
  <li>If \(F(\cdot)\) is linear, the NARX model reduces to the ARX model.</li>
</ul>

<h2 id="stability-of-narx">Stability of NARX</h2>
<p>No guarantee of globall stability past captured data. We can approximate the bulk of the system with a linear model which we can analyze the stability of, and capture the remaining residuals with nonlinear terms.</p>

<hr />

<h2 id="online-and-recursive-system-id">Online and Recursive System ID</h2>

<p>The model is developed online over time, using data once it becomes available at each time step. This method is beneficial for <strong>time-varying systems</strong>.</p>

<h3 id="use-cases-of-online-system-id">Use Cases of Online System ID</h3>
<ol>
  <li>
    <p>Adaptive Control</p>

    <ul>
      <li>Time varying systems</li>
    </ul>
  </li>
  <li>
    <p>Fault Detection</p>

    <ul>
      <li>Create fault tests in real time</li>
    </ul>
  </li>
</ol>

<h3 id="finite-history-algorithms">Finite History Algorithms</h3>
<p>Only use part of the most recent past data with a fixed-length window. Online algorithms needs fast execution, so we only use linear models for now.</p>

<p>However, we need to <strong>store these data</strong>.</p>

<h3 id="infinite-history-recursive-algorithms">Infinite History (Recursive) Algorithms</h3>

<p>Every single data point is run recursively but not stored. Faster execution time.</p>

<p>Method 1: Pick a fixed gain K:</p>

<p><img src="../figures/recursive_algorithm_system_id.png" alt="recursive algorithm" /></p>

<p>Method 2: Since fixed gain is not optimal enough:</p>

<p>Use Kalman!!!</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Albus&#39;s Control Notes</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Albus&#39;s Control Notes</li><li><a class="u-email" href="mailto:albus.fang.autonomy@gmail.com">albus.fang.autonomy@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
